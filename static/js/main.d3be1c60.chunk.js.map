{"version":3,"sources":["workers/Worker.js","Card.js","workers/WorkerPool.js","config.js","App.js","serviceWorker.js","index.js"],"names":["addMethods","methods","module","exports","w","Worker","name","synth","window","speechSynthesis","Card","workerFactory","details","utterThis","SpeechSynthesisUtterance","className","types","type","id","onClick","speak","map","src","WorkerPool","size","worker","this","i","poolSize","used","pool","jobs","hasOwnProperty","_method","args","_queueJob","method","Promise","y","n","push","_nextJob","pop","job","shift","then","catch","finally","P","require","Pokedex","workers","App","useState","pokemon","setPokemon","offset","setOffset","limit","pokemonData","setPokemonData","allPokemon","setAllPokemon","useEffect","getPokemon","length","getPokemonData","getAllPokemon","workerFetch","a","options","getPokemonsList","list","prevState","results","getPokemonByName","data","loadMore","fetch","Icon","Input","fluid","icon","iconPosition","placeholder","index","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","console","message"],"mappings":"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","file":"static/js/main.d3be1c60.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"fetch\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"061e58ee5301f793355f.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","import React from 'react';\nimport { IMG_DETAIL_URL } from './config'\nimport './Card.css'\n\nconst synth = window.speechSynthesis;\n\nfunction Card ({details}) {\n    const utterThis = new SpeechSynthesisUtterance(details.name);\n    return (\n        <div className={`card ${details.types[0].type.name}`}>\n            <div className=\"details\">\n                <div>\n                    <p className=\"id\">{`#${details.id}`}</p>\n                    <p className=\"name\" onClick={() => {synth.speak(utterThis);}}>{details.name}</p>\n                    <div className=\"types\">\n                        {details.types.map((type) => (\n                            <span className={`type ${type.type.name}`}>⬤</span>\n                        ))}\n                    </div>\n                </div>\n            </div>\n            <img className=\"img\" src={`${IMG_DETAIL_URL}/${details.id}.png`} />\n        </div>\n    );\n}\n\nexport default Card;","export default (workerFactory, size) => new WorkerPool(workerFactory, size);\n\nclass WorkerPool {\n  constructor(workerFactory, size) {\n    let worker = (this.workerFactory = workerFactory)();\n    this.poolSize = size || 4;\n    this.used = 1;\n    this.pool = [worker];\n    this.jobs = [];\n    for (let i in worker) if (worker.hasOwnProperty(i) && typeof worker[i]==='function') {\n      this[i] = this._method(i);  // proxy all methods available on the worker\n    }\n  }\n  _method(name) {\n    return (...args) => this._queueJob(name, args);\n  }\n  _queueJob(method, args) {\n    return new Promise((y, n) => {\n      this.jobs.push({ method, args, y, n });\n      this._nextJob();\n    }) \n  }\n  _nextJob() {\n    let worker = this.pool.pop();\n    if (!worker) {\n      if (this.used >= this.poolSize) return;\n      this.used++;\n      worker = this.workerFactory();\n    }\n    const job = this.jobs.shift();\n    if (!job) return;\n    worker[job.method](...job.args).then(job.y).catch(job.n).finally(() => {\n      this.pool.push(worker);\n      this._nextJob();\n    });\n  }\n}","export const IMG_DETAIL_URL = 'https://raw.githubusercontent.com/cotyhamilton/pokemon/master/img/detail';\nexport const IMG_FULL_URL = 'https://raw.githubusercontent.com/cotyhamilton/pokemon/master/img/full';","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Card from './Card';\nimport { Icon, Input } from 'semantic-ui-react';\nimport Worker from 'workerize-loader!./workers/Worker'; // eslint-disable-line import/no-webpack-loader-syntax\nimport WorkerPool  from './workers/WorkerPool';\n\nconst Pokedex = require('pokeapi-js-wrapper');\nconst P = new Pokedex.Pokedex();\n\nlet workers = WorkerPool(Worker, 4);\n\nfunction App() {\n  const [pokemon, setPokemon] = useState([]);\n  const [offset, setOffset] = useState(0);\n  const [limit] = useState(15);\n  const [pokemonData, setPokemonData] = useState({});\n  const [allPokemon, setAllPokemon] = useState([]);\n\n  useEffect(() => {\n    getPokemon();\n  }, [offset]);\n\n  useEffect(() => {\n    if (pokemon.length) {\n      pokemon.map((pokemon) => {\n        getPokemonData(pokemon.name);\n      })\n    }\n  }, [pokemon]);\n\n  useEffect(() => {\n    getAllPokemon();\n  }, []);\n\n  useEffect(() => {\n    if (allPokemon.length) {\n      allPokemon.map((pokemon) => (\n        workerFetch(pokemon)\n      ));\n    }\n  }, [allPokemon]);\n\n  const getPokemon = async () => {\n    const options = { offset, limit };\n    const list = await P.getPokemonsList(options);\n    setPokemon((prevState) => ([...prevState, ...list.results]));\n  }\n\n  const getPokemonData = async (pokemon) => {\n    if (!pokemonData.pokemon) {\n      const data = await P.getPokemonByName(pokemon);\n      setPokemonData((prevState) => ({ ...prevState, [data.name]: data }))\n    }\n  }\n\n  const getAllPokemon = async () => {\n    const list = await P.getPokemonsList();\n    setAllPokemon([...list.results]);\n  }\n\n  const loadMore = async () => {\n    await setOffset(offset + limit);\n  }\n\n  const workerFetch = async (pokemon) => {\n    const data = await workers.fetch(pokemon);\n    setPokemonData((prevState) => ({ ...prevState, [data.name]: data }))\n  }\n\n  return (\n    <div className=\"App\">\n      <header>\n        <Icon className=\"icon\" name=\"sliders\" size=\"large\" />\n      </header>\n      <div className=\"home\">\n        <h1>Pokédex</h1>\n        <p>Search for pokemon by name or using the National Pokedex number</p>\n        <Input fluid icon=\"search\" iconPosition=\"left\" placeholder=\"What Pokémon are you looking for?\" />\n        {pokemon.length ? pokemon.map((pokemon, index) => (\n          !!pokemonData[pokemon.name] ?\n            <Card\n              details={!!pokemonData[pokemon.name] ? pokemonData[pokemon.name] : null}\n            /> : null\n        )): null }\n      </div>\n      <div className=\"page-navigation\">\n        <span onClick={loadMore}>more</span>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'semantic-ui-css/semantic.min.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}